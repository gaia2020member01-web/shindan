<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAIA 活動NAVI - あなたにぴったりの活動を見つけよう</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-image: url('1000051178.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .body-overlay::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: -1;
        }
        .quiz-card {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        .quiz-card.hidden-card {
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
            position: absolute;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #10B981, #06B6D4);
        }
        .primary-btn {
            @apply w-full flex items-center justify-center gap-2 gradient-bg text-white font-bold py-4 px-6 rounded-xl shadow-lg transition-transform duration-200 transform hover:scale-105;
        }
        .option-button {
            @apply bg-white/80 backdrop-blur-sm text-gray-800 font-bold p-4 rounded-xl shadow-lg border-2 border-transparent transition-all duration-200 flex flex-col items-center justify-center text-center h-32;
        }
        .option-button:hover {
            @apply ring-4 ring-emerald-300 transform scale-105;
        }
        .result-card {
            @apply bg-white rounded-xl shadow-lg overflow-hidden transition-transform duration-300 transform hover:-translate-y-1;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 body-overlay">

    <div id="quiz-container" class="max-w-lg w-full mx-auto relative">

        <!-- Start Screen -->
        <div id="start-screen" class="quiz-card text-center p-6 bg-white/90 backdrop-blur-md rounded-2xl shadow-xl">
            <img src="1000051177.jpg" alt="GAIA ロゴ" class="w-48 mx-auto mb-4 rounded-lg">
            <h1 class="text-2xl font-bold text-gray-800">GAIA 活動NAVI</h1>
            <p class="text-gray-600 mt-2 mb-8">あなたにぴったりの<br>生物多様性保全活動、見つけよう！</p>
            <button id="start-btn" class="primary-btn">
                診断をはじめる
                <i data-lucide="arrow-right-circle"></i>
            </button>
        </div>

        <!-- Question Screen -->
        <div id="question-screen" class="quiz-card hidden-card w-full">
             <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-xl p-6">
                <div class="flex justify-between items-center mb-4">
                    <p id="progress-text" class="text-sm font-bold text-emerald-600"></p>
                    <button id="back-btn" class="text-gray-600 hover:text-gray-900 transition-colors hidden flex items-center gap-1 font-semibold text-sm">
                        <i data-lucide="chevrons-left" class="w-4 h-4"></i>
                        戻る
                    </button>
                </div>
                <h2 id="question-text" class="text-xl font-bold text-gray-800 mb-6 text-center"></h2>
                <div id="answer-options" class="grid grid-cols-2 gap-4"></div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="quiz-card hidden-card w-full text-center">
            <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-xl p-6">
                <h2 class="text-lg font-bold text-gray-500">あなたへのおすすめは...</h2>
                <div id="main-result" class="my-4"></div>
                <div id="other-results-container" class="mt-8 text-left hidden">
                    <h3 class="font-bold text-gray-600 mb-2">こんな活動もおすすめです！</h3>
                    <div id="other-results" class="space-y-3"></div>
                </div>
                <button id="retry-btn" class="primary-btn mt-8">
                    <i data-lucide="rotate-cw"></i>
                    もう一度診断する
                </button>
            </div>
        </div>

    </div>

    <script>
    // --- Data Definitions ---
    const activities = {
        'q1': { name: '知多半島の里山保全', desc: '竹を切り、チップに再生！里山が蘇る瞬間を仲間と共に。', img: 'Q1.jpg', tags: ['forest', 'physical', 'craft'] },
        'q2': { name: '佐久島のアマモ場再生活動', desc: '青い海に希望のアマモを植える、"海のゆりかご"再生活動。', img: 'Q2.jpg', tags: ['ocean', 'marine_life', 'plant'] },
        'q3': { name: '新城・設楽の湧水湿地保全', desc: '"日本の重要湿地500"で、希少な生態系を守る。', img: 'Q3.jpg', tags: ['wetland', 'rare_species', 'research'] },
        'q4': { name: '西三河の外来種アカミミガメ駆除', desc: '地域のビオトープを守るため、外来種アカミミガメを捕獲！', img: 'Q4.jpg', tags: ['invasive_species', 'animal', 'research'] },
        'q5': { name: '東部丘陵での稲刈り体験', desc: '日本の原風景、海上の森で、食と農を学ぶ。', img: 'Q5.jpg', tags: ['agriculture', 'physical', 'traditional'] },
        'q6': { name: '東三河での生き物調査', desc: 'コドラート調査に昆虫採集！子どもたちと生き物を探す一日。', img: 'Q6.jpg', tags: ['research', 'education', 'insect', 'kids'] },
        'q7': { name: '渥美半島の海岸清掃', desc: '最高のロケーションで、地球にいいこと。', img: 'Q7.jpg', tags: ['ocean', 'cleanup', 'physical'] },
        'q8': { name: '尾張北部の里山保全', desc: '本格的な林業体験で、森と向き合う。', img: 'Q8.jpg', tags: ['forest', 'physical', 'expert'] },
        'q9': { name: '尾張西部のビオトープ整備', desc: '生き物の"すみか"をデザイン＆創造！', img: 'Q9.jpg', tags: ['design', 'create', 'animal'] },
        'j1': { name: 'SDGs AICHI EXPO', desc: '愛知の未来を考える大舞台で、GAIAの声を届けよう！', img: 'J1.jpg', tags: ['event', 'presentation', 'communication'] },
        'j2': { name: 'TABふれあいフェス', desc: '子どもから大人まで！生き物ふれあいブースで笑顔の輪を広げる。', img: 'J2.jpg', tags: ['event', 'education', 'kids'] },
        'j3': { name: '岡崎自然体験の森', desc: '森の声を聞きながら保全活動。自然と一体になる特別な時間。', img: 'J3.jpg', tags: ['forest', 'physical', 'traditional'] }
    };

    const quizData = [
        {
            question: "どんな場所での活動に興味がある？",
            answers: [
                { text: "森や緑に囲まれたい", tags: ['forest', 'agriculture'], icon: 'leaf' },
                { text: "海や川など、水辺が好き", tags: ['ocean', 'wetland', 'marine_life'], icon: 'waves' },
                { text: "珍しい生き物に出会いたい", tags: ['animal', 'insect', 'rare_species'], icon: 'bug' },
                { text: "イベント会場で多くの人と話したい", tags: ['event', 'communication'], icon: 'users' }
            ]
        },
        {
            question: "どうやって貢献したい？",
            answers: [
                { text: "体を動かして汗を流したい", tags: ['physical', 'cleanup'], icon: 'move' },
                { text: "じっくり観察や調査をしたい", tags: ['research'], icon: 'search' },
                { text: "ものづくりやデザインをしてみたい", tags: ['craft', 'design', 'create'], icon: 'pencil-ruler' },
                { text: "人に伝えたり、教えたりしたい", tags: ['presentation', 'education', 'kids'], icon: 'megaphone' }
            ]
        },
        {
            question: "活動に求めるものは？",
            answers: [
                { text: "達成感を味わいたい", tags: ['physical', 'cleanup', 'create'], icon: 'award' },
                { text: "専門的な知識や技術を学びたい", tags: ['expert', 'research'], icon: 'brain-circuit' },
                { text: "子どもたちと触れ合いたい", tags: ['kids', 'education'], icon: 'baby' },
                { text: "とにかく自然の中でリフレッシュしたい", tags: ['forest', 'ocean', 'wetland'], icon: 'wind' }
            ]
        }
    ];

    // --- DOM Elements ---
    const startScreen = document.getElementById('start-screen');
    const questionScreen = document.getElementById('question-screen');
    const resultScreen = document.getElementById('result-screen');
    const startBtn = document.getElementById('start-btn');
    const retryBtn = document.getElementById('retry-btn');
    const backBtn = document.getElementById('back-btn');
    const questionText = document.getElementById('question-text');
    const answerOptions = document.getElementById('answer-options');
    const progressText = document.getElementById('progress-text');

    // --- State ---
    let currentQuestionIndex = 0;
    let scores = {};
    let answerHistory = [];

    // --- Functions ---

    function switchCard(hideCard, showCard) {
        hideCard.classList.add('hidden-card');
        setTimeout(() => {
            hideCard.classList.add('hidden');
            showCard.classList.remove('hidden');
            setTimeout(() => showCard.classList.remove('hidden-card'), 50);
        }, 500);
    }

    function startQuiz() {
        currentQuestionIndex = 0;
        scores = {};
        answerHistory = [];
        Object.keys(activities).forEach(key => { scores[key] = 0; });
        displayQuestion();
        switchCard(startScreen, questionScreen);
    }

    function displayQuestion() {
        if (currentQuestionIndex >= quizData.length) {
            showResults();
            return;
        }

        const currentQuestion = quizData[currentQuestionIndex];
        questionText.textContent = currentQuestion.question;
        progressText.textContent = `質問 ${currentQuestionIndex + 1} / ${quizData.length}`;
        answerOptions.innerHTML = '';

        currentQuestion.answers.forEach(answer => {
            const button = document.createElement('button');
            button.className = 'option-button';
            button.innerHTML = `
                <i data-lucide="${answer.icon}" class="w-10 h-10 text-emerald-600 mb-2"></i>
                <span class="text-sm">${answer.text}</span>
            `;
            button.onclick = () => selectAnswer(answer.tags);
            answerOptions.appendChild(button);
        });
        
        lucide.createIcons();
        backBtn.classList.toggle('hidden', currentQuestionIndex === 0);
    }

    function selectAnswer(tags) {
        answerHistory.push(tags);
        tags.forEach(tag => {
            for (const key in activities) {
                if (activities[key].tags.includes(tag)) {
                    scores[key]++;
                }
            }
        });
        currentQuestionIndex++;
        displayQuestion();
    }
    
    function goBack() {
        if (currentQuestionIndex === 0) return;
        
        currentQuestionIndex--;
        const lastAnswerTags = answerHistory.pop();

        lastAnswerTags.forEach(tag => {
            for (const key in activities) {
                if (activities[key].tags.includes(tag)) {
                    scores[key]--;
                }
            }
        });
        
        displayQuestion();
    }

    function showResults() {
        const sortedActivities = Object.keys(scores).sort((a, b) => scores[b] - scores[a]);
        
        const mainResultKey = sortedActivities[0];
        const mainResultData = activities[mainResultKey];
        document.getElementById('main-result').innerHTML = createResultCard(mainResultData, true);

        const otherResultsContainer = document.getElementById('other-results-container');
        const otherResultsDiv = document.getElementById('other-results');
        otherResultsDiv.innerHTML = '';
        
        const otherKeys = sortedActivities.slice(1, 3).filter(key => scores[key] > 0);
        if (otherKeys.length > 0) {
            otherKeys.forEach(key => {
                otherResultsDiv.innerHTML += createResultCard(activities[key], false);
            });
            otherResultsContainer.classList.remove('hidden');
        } else {
            otherResultsContainer.classList.add('hidden');
        }

        switchCard(questionScreen, resultScreen);
    }

    function createResultCard(activity, isMain) {
        if (!activity) return '';
        if (isMain) {
            return `
                <div class="result-card">
                    <img src="${activity.img}" alt="${activity.name}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="text-xl font-bold text-emerald-600">${activity.name}</h3>
                        <p class="text-gray-600 mt-2">${activity.desc}</p>
                    </div>
                </div>`;
        } else {
            return `
                <div class="result-card flex items-center p-3">
                    <img src="${activity.img}" alt="${activity.name}" class="w-16 h-16 object-cover rounded-lg mr-4">
                    <div>
                        <h4 class="font-bold text-gray-800">${activity.name}</h4>
                    </div>
                </div>`;
        }
    }

    function resetQuiz() {
        switchCard(resultScreen, startScreen);
    }

    // --- Event Listeners ---
    startBtn.addEventListener('click', startQuiz);
    retryBtn.addEventListener('click', resetQuiz);
    backBtn.addEventListener('click', goBack);

    lucide.createIcons();
    </script>
</body>
</html>


